{
  "_id": "694ffcd32137d8031da881be",
  "title": "React Server Components (RSC) Safety",
  "slug": "react-server-components-rsc-safety",
  "content": {
    "type": "doc",
    "content": [
      {
        "type": "orderedList",
        "attrs": {
          "start": 1,
          "type": null
        },
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Pre-Commit Checklist: React Server Components (RSC) Safety"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "blockquote",
        "content": [
          {
            "type": "paragraph",
            "content": [
              {
                "type": "text",
                "marks": [
                  {
                    "type": "italic"
                  }
                ],
                "text": "Run this "
              },
              {
                "type": "text",
                "marks": [
                  {
                    "type": "bold"
                  },
                  {
                    "type": "italic"
                  }
                ],
                "text": "before every PR merge"
              },
              {
                "type": "text",
                "marks": [
                  {
                    "type": "italic"
                  }
                ],
                "text": " touching "
              },
              {
                "type": "text",
                "marks": [
                  {
                    "type": "code"
                  }
                ],
                "text": "app/"
              },
              {
                "type": "text",
                "marks": [
                  {
                    "type": "italic"
                  }
                ],
                "text": ", Server Actions, or shared components."
              }
            ]
          },
          {
            "type": "paragraph"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph"
      },
      {
        "type": "heading",
        "attrs": {
          "level": 3
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Dependency & Runtime Safety"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "react"
                  },
                  {
                    "type": "text",
                    "text": ", "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "react-dom"
                  },
                  {
                    "type": "text",
                    "text": ", "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "next"
                  },
                  {
                    "type": "text",
                    "text": " "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "bold"
                      }
                    ],
                    "text": "pinned to patched versions"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph"
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No duplicate "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "react-server-dom-*"
                  },
                  {
                    "type": "text",
                    "text": " packages ("
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "npm ls react-server-dom-webpack"
                  },
                  {
                    "type": "text",
                    "text": ")"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Lockfile updated and committed"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph"
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "^"
                  },
                  {
                    "type": "text",
                    "text": " or "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "~"
                  },
                  {
                    "type": "text",
                    "text": " on React-related packages"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "codeBlock",
        "attrs": {
          "language": "bash"
        },
        "content": [
          {
            "type": "text",
            "text": "npm ls react-server-dom-webpack"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph"
      },
      {
        "type": "heading",
        "attrs": {
          "level": 3
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Server Actions = Public Endpoints"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "For "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "every"
          },
          {
            "type": "text",
            "text": " Server Action:"
          }
        ]
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Auth check exists ("
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "auth()"
                  },
                  {
                    "type": "text",
                    "text": ", session, role)"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Input validation exists (type + format)"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No implicit trust in client values"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No side"
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "bold"
                      }
                    ],
                    "text": " "
                  },
                  {
                    "type": "text",
                    "text": "effects without authorization"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "codeBlock",
        "attrs": {
          "language": "ts"
        },
        "content": [
          {
            "type": "text",
            "text": "//  FAIL\nexport async function updateRole(role) {\n  await db.user.update({ role });\n}\n\n//  PASS\nexport async function updateRole(role: string) {\n  if (!auth().isAdmin) throw new Error('Unauthorized');\n  if (!['user', 'admin'].includes(role)) throw new Error('Invalid role');\n}\n"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph"
      },
      {
        "type": "heading",
        "attrs": {
          "level": 3
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "RSC Boundary Discipline"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No raw "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "searchParams"
                  },
                  {
                    "type": "text",
                    "text": ", "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "headers"
                  },
                  {
                    "type": "text",
                    "text": ", or "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "cookies"
                  },
                  {
                    "type": "text",
                    "text": " passed directly to components"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Only "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "bold"
                      }
                    ],
                    "text": "primitive props"
                  },
                  {
                    "type": "text",
                    "text": " cross RSC boundaries"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "code"
                      }
                    ],
                    "text": "any"
                  },
                  {
                    "type": "text",
                    "text": " / untyped objects entering Server Components"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "codeBlock",
        "attrs": {
          "language": "tsx"
        },
        "content": [
          {
            "type": "text",
            "text": "//  FAIL\n<Page params={searchParams} />\n\n// PASS\n<Page userId={String(searchParams.id)} />\n"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph"
      },
      {
        "type": "heading",
        "attrs": {
          "level": 3
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Business Logic Isolation"
          }
        ]
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Server Components "
                  },
                  {
                    "type": "text",
                    "marks": [
                      {
                        "type": "bold"
                      }
                    ],
                    "text": "do not mutate state"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No DB writes inside render trees"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No irreversible operations during render"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "codeBlock",
        "attrs": {
          "language": "ts"
        },
        "content": [
          {
            "type": "text",
            "text": "//  FAIL\nexport default async function Page() {\n  await deleteUser();\n}\n\n//  PASS\nexport default async function Page() {\n  const data = await getUserData();\n  return <UI data={data} />;\n}\n"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "hardBreak",
            "marks": [
              {
                "type": "bold"
              }
            ]
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Reduce RSC Attack Surface"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Routes that don’t need RSC are:"
                  }
                ]
              },
              {
                "type": "bulletList",
                "content": [
                  {
                    "type": "listItem",
                    "content": [
                      {
                        "type": "paragraph",
                        "content": [
                          {
                            "type": "text",
                            "marks": [
                              {
                                "type": "code"
                              }
                            ],
                            "text": "use client"
                          },
                          {
                            "type": "text",
                            "text": ", OR"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "listItem",
                    "content": [
                      {
                        "type": "paragraph",
                        "content": [
                          {
                            "type": "text",
                            "marks": [
                              {
                                "type": "code"
                              }
                            ],
                            "text": "dynamic = 'force-static'"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Admin / internal pages are isolated"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Experimental features behind flags"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "codeBlock",
        "attrs": {
          "language": "ts"
        },
        "content": [
          {
            "type": "text",
            "text": "export const dynamic = 'force-static';"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "hardBreak"
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Serialization Safety"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No class instances passed to Server Components"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No functions passed as props unless intentional"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "No deeply nested objects from client input"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "codeBlock",
        "attrs": {
          "language": "ts"
        },
        "content": [
          {
            "type": "text",
            "text": "// FAIL\nreturn <Page config={req.body} />\n\n// PASS\nreturn <Page theme={String(req.body.theme)} />\n"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "hardBreak",
            "marks": [
              {
                "type": "bold"
              }
            ]
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Middleware & Observability (Minimum)"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "RSC requests are identifiable in middleware"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Logs enabled for abnormal RSC traffic"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Errors don’t leak stack traces to client"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "codeBlock",
        "attrs": {
          "language": "ts"
        },
        "content": [
          {
            "type": "text",
            "text": "if (req.headers.get('rsc')) {\n  logRSCRequest(req);\n}"
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "hardBreak",
            "marks": [
              {
                "type": "bold"
              }
            ]
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Review Triggers (Mandatory Extra Review)"
          }
        ]
      },
      {
        "type": "paragraph"
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "Require "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "security review"
          },
          {
            "type": "text",
            "text": " if PR includes:"
          }
        ]
      },
      {
        "type": "bulletList",
        "content": [
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "New Server Actions"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Changes to RSC data flow"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Auth logic changes"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Dependency upgrades involving React / Next"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph",
                "content": [
                  {
                    "type": "text",
                    "text": "Custom RSC streaming logic"
                  }
                ]
              }
            ]
          },
          {
            "type": "listItem",
            "content": [
              {
                "type": "paragraph"
              }
            ]
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "heading",
        "attrs": {
          "level": 2
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Mental Model to Keep in Mind"
          }
        ]
      },
      {
        "type": "blockquote",
        "content": [
          {
            "type": "paragraph",
            "content": [
              {
                "type": "text",
                "marks": [
                  {
                    "type": "bold"
                  }
                ],
                "text": "If it runs on the server, assume an attacker can reach it."
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "JSX does not mean safe."
          },
          {
            "type": "hardBreak"
          },
          {
            "type": "text",
            "text": "Frontend does not mean client."
          },
          {
            "type": "hardBreak"
          },
          {
            "type": "text",
            "text": "RSC is backend power with frontend syntax."
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "heading",
        "attrs": {
          "level": 2
        },
        "content": [
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "Final Rule (Non-Negotiable)"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "If any checklist item fails:"
          }
        ]
      },
      {
        "type": "blockquote",
        "content": [
          {
            "type": "paragraph",
            "content": [
              {
                "type": "text",
                "text": "❌ "
              },
              {
                "type": "text",
                "marks": [
                  {
                    "type": "bold"
                  }
                ],
                "text": "Do not merge. Fix first."
              }
            ]
          }
        ]
      },
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "This checklist exists because "
          },
          {
            "type": "text",
            "marks": [
              {
                "type": "bold"
              }
            ],
            "text": "React Server Components turned frontend engineers into backend engineers — whether we like it or not"
          },
          {
            "type": "text",
            "text": "."
          }
        ]
      },
      {
        "type": "horizontalRule"
      },
      {
        "type": "paragraph"
      }
    ]
  },
  "tags": [
    "react19",
    "security",
    "rsc"
  ],
  "published": true,
  "featured": false,
  "views": 19,
  "likes": 1,
  "createdAt": "2025-12-27T15:35:47.849Z",
  "updatedAt": "2025-12-27T15:35:47.849Z",
  "__v": 0
}